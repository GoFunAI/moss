import{a as C,o as j}from"./evtd.9eee5233.js";import{w as lt}from"./seemly.d0f7d7a4.js";import{y as at,F as ut,Z as pt,e as y,B as dt,g as J,i as T,r as V,A as D,M as K,D as A,c as ht,X as B,L as ft,o as Q,w as M,C as mt,x as bt}from"./@vue.0987707a.js";import{u as ct}from"./@css-render.6ced7bf3.js";import{c as wt,u as k,o as xt,i as vt}from"./vooks.3f61458b.js";import{C as $t}from"./css-render.20ab466e.js";import{z as yt}from"./vdirs.ab69c576.js";import{R as Mt}from"./@juggle.32c34d6c.js";function Y(n,t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);return r()}function L(n,t=!0,e=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&e.push(at(String(r)));return}if(Array.isArray(r)){L(r,t,e);return}if(r.type===ut){if(r.children===null)return;Array.isArray(r.children)&&L(r.children,t,e)}else r.type!==pt&&e.push(r)}}),e}function P(n,t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);const s=L(r());if(s.length===1)return s[0];throw new Error(`[vueuc/${n}]: slot[${e}] should have exactly one child.`)}let v=null;function N(){if(v===null&&(v=document.getElementById("v-binder-view-measurer"),v===null)){v=document.createElement("div"),v.id="v-binder-view-measurer";const{style:n}=v;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(v)}return v.getBoundingClientRect()}function gt(n,t){const e=N();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function X(n){const t=n.getBoundingClientRect(),e=N();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function zt(n){return n.nodeType===9?null:n.parentNode}function R(n){if(n===null)return null;const t=zt(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:r,overflowY:s}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+s+r))return t}return R(t)}const At=y({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;dt("VBinder",(t=J())===null||t===void 0?void 0:t.proxy);const e=T("VBinder",null),r=V(null),s=i=>{r.value=i,e&&n.syncTargetWithParent&&e.setTargetRef(i)};let f=[];const h=()=>{let i=r.value;for(;i=R(i),i!==null;)f.push(i);for(const b of f)j("scroll",b,w,!0)},c=()=>{for(const i of f)C("scroll",i,w,!0);f=[]},l=new Set,m=i=>{l.size===0&&h(),l.has(i)||l.add(i)},x=i=>{l.has(i)&&l.delete(i),l.size===0&&c()},w=()=>{lt(o)},o=()=>{l.forEach(i=>i())},a=new Set,p=i=>{a.size===0&&j("resize",window,d),a.has(i)||a.add(i)},u=i=>{a.has(i)&&a.delete(i),a.size===0&&C("resize",window,d)},d=()=>{a.forEach(i=>i())};return D(()=>{C("resize",window,d),c()}),{targetRef:r,setTargetRef:s,addScrollListener:m,removeScrollListener:x,addResizeListener:p,removeResizeListener:u}},render(){return Y("binder",this.$slots)}}),_t=At,Ut=y({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=T("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?K(P("follower",this.$slots),[[t]]):P("follower",this.$slots)}});function _(n,t){console.error(`[vueuc/${n}]: ${t}`)}const{c:g}=$t(),Bt="vueuc-style",Ot=y({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:wt(A(n,"show")),mergedTo:ht(()=>{const{to:t}=n;return t!=null?t:"body"})}},render(){return this.showTeleport?this.disabled?Y("lazy-teleport",this.$slots):B(ft,{disabled:this.disabled,to:this.mergedTo},Y("lazy-teleport",this.$slots)):null}}),z={top:"bottom",bottom:"top",left:"right",right:"left"},U={start:"end",center:"center",end:"start"},S={top:"height",bottom:"height",left:"width",right:"width"},Et={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Ct={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Xt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},q={top:!0,bottom:!1,left:!0,right:!1},Z={top:"end",bottom:"start",left:"end",right:"start"};function St(n,t,e,r,s,f){if(!s||f)return{placement:n,top:0,left:0};const[h,c]=n.split("-");let l=c!=null?c:"center",m={top:0,left:0};const x=(a,p,u)=>{let d=0,i=0;const b=e[a]-t[p]-t[a];return b>0&&r&&(u?i=q[p]?b:-b:d=q[p]?b:-b),{left:d,top:i}},w=h==="left"||h==="right";if(l!=="center"){const a=Xt[n],p=z[a],u=S[a];if(e[u]>t[u]){if(t[a]+t[u]<e[u]){const d=(e[u]-t[u])/2;t[a]<d||t[p]<d?t[a]<t[p]?(l=U[c],m=x(u,p,w)):m=x(u,a,w):l="center"}}else e[u]<t[u]&&t[p]<0&&t[a]>t[p]&&(l=U[c])}else{const a=h==="bottom"||h==="top"?"left":"top",p=z[a],u=S[a],d=(e[u]-t[u])/2;(t[a]<d||t[p]<d)&&(t[a]>t[p]?(l=Z[a],m=x(u,a,w)):(l=Z[p],m=x(u,p,w)))}let o=h;return t[h]<e[S[h]]&&t[h]<t[z[h]]&&(o=z[h]),{placement:l!=="center"?`${o}-${l}`:o,left:m.left,top:m.top}}function Vt(n,t){return t?Ct[n]:Et[n]}function Yt(n,t,e,r,s,f){if(f)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+r)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+r)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+r)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+r)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+r)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+r)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+r)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+r)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+r)}px`,left:`${Math.round(e.left-t.left+e.width/2+s)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+r)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+r)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+r)}px`,left:`${Math.round(e.left-t.left+e.width/2+s)}px`,transform:"translateX(-50%)"}}}const Lt=g([g(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),g(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[g("> *",{pointerEvents:"all"})])]),qt=y({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=T("VBinder"),e=k(()=>n.enabled!==void 0?n.enabled:n.show),r=V(null),s=V(null),f=()=>{const{syncTrigger:o}=n;o.includes("scroll")&&t.addScrollListener(l),o.includes("resize")&&t.addResizeListener(l)},h=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};Q(()=>{e.value&&(l(),f())});const c=ct();Lt.mount({id:"vueuc/binder",head:!0,anchorMetaName:Bt,ssr:c}),D(()=>{h()}),xt(()=>{e.value&&l()});const l=()=>{if(!e.value)return;const o=r.value;if(o===null)return;const a=t.targetRef,{x:p,y:u,overlap:d}=n,i=p!==void 0&&u!==void 0?gt(p,u):X(a);o.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),o.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:b,minWidth:O,placement:F,internalShift:tt,flip:et}=n;o.setAttribute("v-placement",F),d?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:$}=o;b==="target"?$.width=`${i.width}px`:b!==void 0?$.width=b:$.width="",O==="target"?$.minWidth=`${i.width}px`:O!==void 0?$.minWidth=O:$.minWidth="";const nt=X(o),rt=X(s.value),{left:H,top:W,placement:E}=St(F,i,nt,tt,et,d),I=Vt(E,d),{left:ot,top:it,transform:st}=Yt(E,rt,i,W,H,d);o.setAttribute("v-placement",E),o.style.setProperty("--v-offset-left",`${Math.round(H)}px`),o.style.setProperty("--v-offset-top",`${Math.round(W)}px`),o.style.transform=`translateX(${ot}) translateY(${it}) ${st}`,o.style.setProperty("--v-transform-origin",I),o.style.transformOrigin=I};M(e,o=>{o?(f(),m()):h()});const m=()=>{mt().then(l).catch(o=>console.error(o))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(o=>{M(A(n,o),l)}),["teleportDisabled"].forEach(o=>{M(A(n,o),m)}),M(A(n,"syncTrigger"),o=>{o.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),o.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)});const x=vt(),w=k(()=>{const{to:o}=n;if(o!==void 0)return o;x.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:s,followerRef:r,mergedTo:w,syncPosition:l}},render(){return B(Ot,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=B("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[B("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?K(e,[[yt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});class Tt{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new Mt(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const r=this.elHandlersMap.get(e.target);r!==void 0&&r(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){!this.elHandlersMap.has(t)||(this.elHandlersMap.delete(t),this.observer.unobserve(t))}}const G=new Tt,Zt=y({name:"ResizeObserver",props:{onResize:Function},setup(n){let t=!1;const e=J().proxy;function r(s){const{onResize:f}=n;f!==void 0&&f(s)}Q(()=>{const s=e.$el;if(s===void 0){_("resize-observer","$el does not exist.");return}if(s.nextElementSibling!==s.nextSibling&&s.nodeType===3&&s.nodeValue!==""){_("resize-observer","$el can not be observed (it may be a text node).");return}s.nextElementSibling!==null&&(G.registerHandler(s.nextElementSibling,r),t=!0)}),D(()=>{t&&G.unregisterHandler(e.$el.nextElementSibling)})},render(){return bt(this.$slots,"default")}});export{Zt as V,_t as a,Ut as b,qt as c};
